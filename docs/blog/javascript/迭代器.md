# 迭代器

## 理解迭代

在 JavaScript 中，计数循环就是一种最简单的迭代：

``` javascript
for (let i = 1; i <= 10; ++i) {
  console.log(i);
}
```

循环是迭代机制的基础，因为它可以指定迭代的次数以及每次迭代要执行什么操作。每次循环都会在下一次迭代前完成，而每次迭代的顺序都是事先定义好的。

迭代会在一个有序集合上进行，数组是 JavaScript 中有序集合的最典型例子。

``` javascript
const collection = ['foo', 'bar', 'baz'];
 
for (let index = 0; index < collection.length; ++index) {
  console.log(collection[index]);
}
```

因为数组有已知的长度，且数组每一项都可以通过索引获取，所以整个数组可以通过递增索引来遍历。由于如下原因，通过这种循环来执行例程并不理想。

- 迭代之前需要事先知道如何使用数据结构

> 数组中的每一项都只能先通过引用取得数组对象，然后再通过 `[]` 操作符取得特定索引位置上的项。这种情况不适用于所有数据结构。

- 遍历顺序并不是数据结构固有的

> 通过递增索引来访问数据是特定于数组类型的方式，不适用于其它具有隐式顺序的数据结构。

ES5 新增了 `Array.prototype.forEach()` 方法，向通用迭代需求迈进了一步：

``` javascript
const collection = ['foo', 'bar', 'baz'];
 
collection.forEach((item) => console.log(item));
```

 这个方式解决了单独记录索引通过数组对象取得值的问题，不过没有办法标识迭代何时终止，因此这个方法只适用于数组，而且回调结构也比较笨拙。

在 ECMAScript 较早的版本中，执行迭代必须使用循环或其他辅助结构。随着代码量的增加，代码会变得越发混乱。很多语言都通过原生语言结构解决了这个问题，开发者无须事先知道如何迭代就能实现迭代操作。这个解决方案就是 **迭代器模式**。