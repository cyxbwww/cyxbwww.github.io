# 期约与异步函数

## 期约基础

ECMAScript 6新增的引用类型 `Promise`,可以通过 `new` 操作符来实例化。创建新期约时需要传入执行器（ executor ）函数作为参数，下面的例子使用了一个空函数对象来应付一下解释器，如果不提供执行器函数会抛出 `SyntaxError`。

``` javascript
const p = new Promise(() => {});
setTimeout(console.log, 0, p); // Promise <pending>
```

### 期约状态机

期约是一个有状态的对象，可能处于如下 3 种状态之一：

- 待定（ pending ）
- 兑现（ fulfilled，有时候也称为“解决”，resolved ）
- 拒绝（ rejected ）

**待定**（ pending ）是期约的最初始状态。在待定状态下，期约可以**落定**（ settled ）为代表成功的**兑现**（ fulfilled ）状态，或者代表失败的**拒绝**（ rejected ）状态。无论落定为哪种状态都是不可逆的。只要从待定转换为兑现或拒绝，期约的状态就不再改变。而且也不能保证期约必然会脱离待定状态。因此，组织合理的代码无论期约解决（ resolve ）还是拒绝（ reject ），甚至永远处于待定（ pending ）状态，都应该具有恰当的行为。